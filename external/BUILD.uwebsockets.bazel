CC_OPTS = select({
    "@bazel_tools//src/conditions:windows": ["/std:c++17"],
    "//conditions:default": ["--std=c++17"],
})

cc_library(
    name = "uwebsockets",
    hdrs = glob(["src/*.h"]),
    srcs = glob(["src/*.c"]),
    copts = CC_OPTS,
    includes = ["./src"],
    visibility = ["//visibility:public"],
    deps = ["@usockets//:usockets", "@libuv", "@zlib//:zlib"],
)
